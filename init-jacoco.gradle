allprojects {
    apply plugin: 'jacoco'

    jacoco {
        toolVersion = '0.8.10'
    }

    tasks.withType(Test) {
        finalizedBy 'jacocoTestReport'
    }

    jacocoTestReport {
        dependsOn test
        reports {
            xml.required = true
            html.required = true
            csv.required = false
        }
    }

    jacocoTestCoverageVerification {
        violationRules {
            rule {
                limit {
                    minimum = 0.0
                }
            }
        }
    }
}
